on: [pull_request]
jobs:
  check-diff:
    name: check diff
    runs-on: ubuntu-latest
    steps:
      -
        name: prepare
        run: |
          export comments_url=$(jq -r .pull_request.comments_url < ${GITHUB_EVENT_PATH})
          export comment_payload="$(echo '{}' | jq --arg body 'hi i am a robot' '.body = $body')"
      -
        name: report diff
        run: |
          curl -sS -XPOST \
            -H "authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
            -H "content-type: application/json" \
            -d "${comment_payload}" \
            ${comments_url}
